ADD_SUBDIRECTORY(sim800l)

FILE(GLOB_RECURSE THIRD_PARTY_SRCS
        "${CMAKE_CURRENT_LIST_DIR}/sim800l/*.c"
        "${CMAKE_CURRENT_LIST_DIR}/sim800l/*.h"
        )


include_directories(${CMAKE_CURRENT_LIST_DIR}/../lib/drivers/include ${CMAKE_CURRENT_LIST_DIR}/../lib/bsp/include ${CMAKE_CURRENT_LIST_DIR}/sim800l/include)

FILE(GLOB_RECURSE THIRD_PARTY_ASSEMBLY_FILES
        "${CMAKE_CURRENT_LIST_DIR}/sim800l/*.s"
        "${CMAKE_CURRENT_LIST_DIR}/sim800l/*.s"
        )

SET_PROPERTY(SOURCE ${THIRD_PARTY_ASSEMBLY_FILES} PROPERTY LANGUAGE C)
SET_SOURCE_FILES_PROPERTIES(${THIRD_PARTY_ASSEMBLY_FILES} PROPERTIES COMPILE_FLAGS "-x assembler-with-cpp -D __riscv64")

ADD_LIBRARY(tplibs ${THIRD_PARTY_SRCS})
TARGET_LINK_LIBRARIES(tplibs PUBLIC sim800l)
SET_TARGET_PROPERTIES(tplibs PROPERTIES LINKER_LANGUAGE C)
